webpackJsonp([2],{"4R6/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Xxa5"),a=r.n(n),s=r("exGp"),o=r.n(s),c=r("Dd8w"),u=r.n(c),i=r("NYxO"),l=r("MfVK"),p=r("i84Q"),d={name:"register",data:function(){return{phoneNumber:null,captcha:null,computedTime:null,passWord:null,verifyPass:null,iconType:"success",duration:2e3}},created:function(){},computed:Object(i.c)({isLogin:function(e){return e.isLogin},userInfo:function(e){return e.userInfo},rightPhoneNumber:function(){return/^1\d{10}$/gi.test(this.phoneNumber)}}),methods:u()({},Object(i.b)([]),{getVerifyCode:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.rightPhoneNumber){t.next=17;break}return e.computedTime=30,e.timer=setInterval(function(){e.computedTime--,0===e.computedTime&&clearInterval(e.timer)},1e3),t.next=5,Object(p.b)({phoneNumber:e.phoneNumber});case 5:if("0000"===t.sent.return_code){t.next=9;break}return Object(l.Toast)({duration:e.duration,message:"用户已存在",icon:"warn"}),t.abrupt("return",!1);case 9:return t.next=11,Object(p.d)({phoneNumber:e.phoneNumber});case 11:if("0000"===t.sent.return_code){t.next=15;break}return Object(l.Toast)({duration:e.duration,message:"验证码发送失败",icon:"warn"}),t.abrupt("return",!1);case 15:t.next=19;break;case 17:return Object(l.Toast)({duration:e.duration,message:"请先输入手机号",icon:"warn"}),t.abrupt("return",!1);case 19:case"end":return t.stop()}},t,e)}))()},changeIconType:function(){this.iconType="success"===this.iconType?"circle":"success"},createUser:function(){var e=this;return o()(a.a.mark(function t(){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.phoneNumber){t.next=3;break}return Object(l.Toast)({duration:e.duration,message:"请先输入手机号",icon:"warn"}),t.abrupt("return",!1);case 3:if(e.captcha){t.next=6;break}return Object(l.Toast)({duration:e.duration,message:"请先输入短信验证码",icon:"warn"}),t.abrupt("return",!1);case 6:if(e.passWord){t.next=9;break}return Object(l.Toast)({duration:e.duration,message:"请先输入密码",icon:"warn"}),t.abrupt("return",!1);case 9:if(e.passWord===e.verifyPass){t.next=12;break}return Object(l.Toast)({duration:e.duration,message:"两次密码输入不一致",icon:"warn"}),t.abrupt("return",!1);case 12:return t.next=14,Object(p.c)({phoneNumber:e.phoneNumber,captcha:e.captcha,passWord:e.passWord});case 14:if(r=t.sent,console.log(r),"0000"===r.return_code){t.next=19;break}return Object(l.Toast)({duration:e.duration,message:r.return_msg,icon:"warn"}),t.abrupt("return",!1);case 19:Object(l.Toast)({duration:e.duration,message:"注册成功",icon:"success"}),e.timer=setInterval(function(){clearInterval(e.timer),e.$router.push("/home")},e.duration);case 21:case"end":return t.stop()}},t,e)}))()}})},b={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-container"},[r("wv-header",{attrs:{title:"注册",fixed:!1,"background-color":"#1aad19"}},[r("div",{staticClass:"register-back",attrs:{slot:"left"},on:{click:function(t){e.$router.go(-1)}},slot:"left"},[r("icon",{attrs:{name:"chevron-left",scale:"1"}})],1)]),e._v(" "),r("wv-group",{staticClass:"register-form"},[r("wv-input",{attrs:{label:"手机号",type:"number",placeholder:"请输入手机号",required:"",pattern:"^1[0-9]{10}$","validate-mode":{onFocus:!1}},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}}),e._v(" "),r("wv-input",{attrs:{label:"短信验证码",placeholder:"请输入验证码"},model:{value:e.captcha,callback:function(t){e.captcha=t},expression:"captcha"}},[r("button",{directives:[{name:"show",rawName:"v-show",value:!e.computedTime,expression:"!computedTime"}],staticClass:"weui-vcode-btn",attrs:{slot:"ft"},on:{click:function(t){return t.preventDefault(),e.getVerifyCode(t)}},slot:"ft"},[e._v("获取验证码")]),e._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:e.computedTime,expression:"computedTime"}],staticClass:"weui-vcode-btn",attrs:{slot:"ft"},on:{click:function(e){e.preventDefault()}},slot:"ft"},[e._v(e._s(e.computedTime))])]),e._v(" "),r("wv-input",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}}),e._v(" "),r("wv-input",{attrs:{type:"password",label:"密码确认",placeholder:"请再次输入密码",required:""},model:{value:e.verifyPass,callback:function(t){e.verifyPass=t},expression:"verifyPass"}})],1),e._v(" "),r("div",{staticClass:"register-deal"},[r("wv-icon",{attrs:{type:e.iconType},on:{click:function(t){return t.preventDefault(),e.changeIconType(t)}}}),r("router-link",{staticClass:"deal-content",attrs:{to:"/deal"}},[e._v("同意用户注册协议")])],1),e._v(" "),r("div",{staticClass:"register-btns"},[r("wv-button",{staticClass:"register-btn",attrs:{type:"default"},on:{click:function(t){return t.preventDefault(),e.createUser(t)}}},[e._v("注册")])],1)],1)},staticRenderFns:[]};var m=r("VU/8")(d,b,!1,function(e){r("9m/w")},"data-v-7aaa7e75",null);t.default=m.exports},"9m/w":function(e,t){}});
//# sourceMappingURL=2.90819bacf49ab806a4b6.js.map