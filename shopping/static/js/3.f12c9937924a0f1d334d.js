webpackJsonp([3],{eohh:function(e,t){},krYw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),s=n("exGp"),o=n.n(s),i=n("Dd8w"),c=n.n(i),u=n("NYxO"),d=n("MfVK"),p=n("i84Q"),l={name:"bindweixin",data:function(){return{sessionId:null,phoneNumber:null,phoneExist:!0,captcha:null,computedTime:null,passWord:null,verifyPass:null,iconType:"success",duration:2e3}},created:function(){this.sessionId=this.$route.params.session_id},computed:Object(u.c)({isLogin:function(e){return e.isLogin},userInfo:function(e){return e.userInfo},rightPhoneNumber:function(){return/^1\d{10}$/gi.test(this.phoneNumber)}}),methods:c()({},Object(u.b)([]),{getVerifyCode:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.rightPhoneNumber){t.next=15;break}return e.computedTime=30,e.timer=setInterval(function(){e.computedTime--,0===e.computedTime&&clearInterval(e.timer)},1e3),t.next=5,Object(p.b)({phoneNumber:e.phoneNumber});case 5:return"0000"===t.sent.return_code&&(e.phoneExist=!1),t.next=9,Object(p.d)({phoneNumber:e.phoneNumber});case 9:if("0000"===t.sent.return_code){t.next=13;break}return Object(d.Toast)({duration:e.duration,message:"验证码发送失败",icon:"warn"}),t.abrupt("return",!1);case 13:t.next=17;break;case 15:return Object(d.Toast)({duration:e.duration,message:"请先输入手机号",icon:"warn"}),t.abrupt("return",!1);case 17:case"end":return t.stop()}},t,e)}))()},changeIconType:function(){this.iconType="success"===this.iconType?"circle":"success"},bindUser:function(){var e=this;return o()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.phoneNumber){t.next=3;break}return Object(d.Toast)({duration:e.duration,message:"请先输入手机号",icon:"warn"}),t.abrupt("return",!1);case 3:if(e.captcha){t.next=6;break}return Object(d.Toast)({duration:e.duration,message:"请先输入短信验证码",icon:"warn"}),t.abrupt("return",!1);case 6:if(e.phoneExist||e.passWord){t.next=9;break}return Object(d.Toast)({duration:e.duration,message:"请先输入密码",icon:"warn"}),t.abrupt("return",!1);case 9:if(e.phoneExist||e.passWord===e.verifyPass){t.next=12;break}return Object(d.Toast)({duration:e.duration,message:"两次密码输入不一致",icon:"warn"}),t.abrupt("return",!1);case 12:return t.next=14,Object(p.a)({phoneNumber:e.phoneNumber,captcha:e.captcha,passWord:e.passWord,sessionId:e.sessionId});case 14:if(n=t.sent,console.log(n),"0000"===n.return_code){t.next=19;break}return Object(d.Toast)({duration:e.duration,message:n.return_msg,icon:"warn"}),t.abrupt("return",!1);case 19:Object(d.Toast)({duration:e.duration,message:"绑定成功",icon:"success"}),e.timer=setInterval(function(){clearInterval(e.timer),e.$router.push("/home")},e.duration);case 21:case"end":return t.stop()}},t,e)}))()}})},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bind-container"},[n("wv-header",{attrs:{title:"账号绑定",fixed:!1,"background-color":"#1aad19"}},[n("div",{staticClass:"bind-back",attrs:{slot:"left"},on:{click:function(t){e.$router.go(-1)}},slot:"left"},[n("icon",{attrs:{name:"chevron-left",scale:"1"}})],1)]),e._v(" "),n("wv-group",{staticClass:"bind-form"},[n("wv-input",{attrs:{label:"手机号",type:"number",placeholder:"请输入手机号",required:"",pattern:"^1[0-9]{10}$","validate-mode":{onFocus:!1}},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber=t},expression:"phoneNumber"}}),e._v(" "),n("wv-input",{attrs:{label:"短信验证码",placeholder:"请输入验证码"},model:{value:e.captcha,callback:function(t){e.captcha=t},expression:"captcha"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.computedTime,expression:"!computedTime"}],staticClass:"weui-vcode-btn",attrs:{slot:"ft"},on:{click:function(t){return t.preventDefault(),e.getVerifyCode(t)}},slot:"ft"},[e._v("获取验证码")]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.computedTime,expression:"computedTime"}],staticClass:"weui-vcode-btn",attrs:{slot:"ft"},on:{click:function(e){e.preventDefault()}},slot:"ft"},[e._v(e._s(e.computedTime))])]),e._v(" "),e.phoneExist?e._e():n("wv-input",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}}),e._v(" "),e.phoneExist?e._e():n("wv-input",{attrs:{type:"password",label:"密码确认",placeholder:"请再次输入密码",required:""},model:{value:e.verifyPass,callback:function(t){e.verifyPass=t},expression:"verifyPass"}})],1),e._v(" "),e.phoneExist?e._e():n("div",{staticClass:"bind-deal"},[n("wv-icon",{attrs:{type:e.iconType},on:{click:function(t){return t.preventDefault(),e.changeIconType(t)}}}),n("router-link",{staticClass:"deal-content",attrs:{to:"/deal"}},[e._v("同意用户注册协议")])],1),e._v(" "),n("div",{staticClass:"bind-btns"},[n("wv-button",{staticClass:"bind-btn",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.bindUser(t)}}},[e._v("立即绑定")])],1)],1)},staticRenderFns:[]};var m=n("VU/8")(l,b,!1,function(e){n("eohh")},"data-v-79cd709e",null);t.default=m.exports}});
//# sourceMappingURL=3.f12c9937924a0f1d334d.js.map